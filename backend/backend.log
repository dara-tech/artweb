
> preart-backend@1.0.0 dev
> nodemon src/server.js

[33m[nodemon] 3.1.10[39m
[33m[nodemon] to restart at any time, enter `rs`[39m
[33m[nodemon] watching path(s): *.*[39m
[33m[nodemon] watching extensions: js,mjs,cjs,json[39m
[32m[nodemon] starting `node src/server.js`[39m
âœ… Loaded: 01_active_art_previous
âœ… Loaded: 02_active_pre_art_previous
âœ… Loaded: 03_newly_enrolled
âœ… Loaded: 04_retested_positive
âœ… Loaded: 05_newly_initiated
âœ… Loaded: 05.1.1_art_same_day
âœ… Loaded: 05.1.2_art_1_7_days
âœ… Loaded: 05.1.3_art_over_7_days
âœ… Loaded: 05.2_art_with_tld
âœ… Loaded: 06_transfer_in
âœ… Loaded: 07_lost_and_return
âœ… Loaded: 08.1_dead
âœ… Loaded: 08.2_lost_to_followup
âœ… Loaded: 08.3_transfer_out
âœ… Loaded: 09_active_pre_art
âœ… Loaded: 10_active_art_current
âœ… Loaded: 10.1_eligible_mmd
âœ… Loaded: 10.2_mmd
âœ… Loaded: 10.3_tld
âœ… Loaded: 10.4_tpt_start
âœ… Loaded: 10.5_tpt_complete
âœ… Loaded: 10.6_eligible_vl_test
âœ… Loaded: 10.7_vl_tested_12m
âœ… Loaded: 10.8_vl_suppression
ðŸ“Š Loaded 24 aggregate indicator queries into memory
âœ… Loaded: 01_active_art_previous_details
âœ… Loaded: 02_active_pre_art_previous_details
âœ… Loaded: 03_newly_enrolled_details
âœ… Loaded: 04_retested_positive_details
âœ… Loaded: 05_newly_initiated_details
âœ… Loaded: 05.1.1_art_same_day_details
âœ… Loaded: 05.1.2_art_1_7_days_details
âœ… Loaded: 05.1.3_art_over_7_days_details
âœ… Loaded: 05.2_art_with_tld_details
âœ… Loaded: 06_transfer_in_details
âœ… Loaded: 07_lost_and_return_details
âœ… Loaded: 08.1_dead_details
âœ… Loaded: 08.2_lost_to_followup_details
âœ… Loaded: 08.3_transfer_out_details
âœ… Loaded: 09_active_pre_art_details
âœ… Loaded: 10_active_art_current_details
âœ… Loaded: 10.1_eligible_mmd_details
âœ… Loaded: 10.2_mmd_details
âœ… Loaded: 10.3_tld_details
âœ… Loaded: 10.4_tpt_start_details
âœ… Loaded: 10.5_tpt_complete_details
âœ… Loaded: 10.6_eligible_vl_test_details
âœ… Loaded: 10.7_vl_tested_12m_details
âœ… Loaded: 10.8_vl_suppression_details
ðŸ“Š Loaded 48 detail indicator queries into memory
node:internal/modules/cjs/loader:1215
  throw err;
  ^

Error: Cannot find module './enhanced-conflict-resolution'
Require stack:
- /Users/cheolsovandara/Documents/D/Developments/2026/artweb/artweb/backend/src/routes/data-import-export.js
- /Users/cheolsovandara/Documents/D/Developments/2026/artweb/artweb/backend/src/server.js
    at Module._resolveFilename (node:internal/modules/cjs/loader:1212:15)
    at Module._load (node:internal/modules/cjs/loader:1043:27)
    at Module.require (node:internal/modules/cjs/loader:1298:19)
    at require (node:internal/modules/helpers:182:18)
    at Object.<anonymous> (/Users/cheolsovandara/Documents/D/Developments/2026/artweb/artweb/backend/src/routes/data-import-export.js:8:38)
    at Module._compile (node:internal/modules/cjs/loader:1529:14)
    at Module._extensions..js (node:internal/modules/cjs/loader:1613:10)
    at Module.load (node:internal/modules/cjs/loader:1275:32)
    at Module._load (node:internal/modules/cjs/loader:1096:12)
    at Module.require (node:internal/modules/cjs/loader:1298:19) {
  code: 'MODULE_NOT_FOUND',
  requireStack: [
    '/Users/cheolsovandara/Documents/D/Developments/2026/artweb/artweb/backend/src/routes/data-import-export.js',
    '/Users/cheolsovandara/Documents/D/Developments/2026/artweb/artweb/backend/src/server.js'
  ]
}

Node.js v20.19.1
[31m[nodemon] app crashed - waiting for file changes before starting...[39m
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `node src/server.js`[39m
âœ… Loaded: 01_active_art_previous
âœ… Loaded: 02_active_pre_art_previous
âœ… Loaded: 03_newly_enrolled
âœ… Loaded: 04_retested_positive
âœ… Loaded: 05_newly_initiated
âœ… Loaded: 05.1.1_art_same_day
âœ… Loaded: 05.1.2_art_1_7_days
âœ… Loaded: 05.1.3_art_over_7_days
âœ… Loaded: 05.2_art_with_tld
âœ… Loaded: 06_transfer_in
âœ… Loaded: 07_lost_and_return
âœ… Loaded: 08.1_dead
âœ… Loaded: 08.2_lost_to_followup
âœ… Loaded: 08.3_transfer_out
âœ… Loaded: 09_active_pre_art
âœ… Loaded: 10_active_art_current
âœ… Loaded: 10.1_eligible_mmd
âœ… Loaded: 10.2_mmd
âœ… Loaded: 10.3_tld
âœ… Loaded: 10.4_tpt_start
âœ… Loaded: 10.5_tpt_complete
âœ… Loaded: 10.6_eligible_vl_test
âœ… Loaded: 10.7_vl_tested_12m
âœ… Loaded: 10.8_vl_suppression
ðŸ“Š Loaded 24 aggregate indicator queries into memory
âœ… Loaded: 01_active_art_previous_details
âœ… Loaded: 02_active_pre_art_previous_details
âœ… Loaded: 03_newly_enrolled_details
âœ… Loaded: 04_retested_positive_details
âœ… Loaded: 05_newly_initiated_details
âœ… Loaded: 05.1.1_art_same_day_details
âœ… Loaded: 05.1.2_art_1_7_days_details
âœ… Loaded: 05.1.3_art_over_7_days_details
âœ… Loaded: 05.2_art_with_tld_details
âœ… Loaded: 06_transfer_in_details
âœ… Loaded: 07_lost_and_return_details
âœ… Loaded: 08.1_dead_details
âœ… Loaded: 08.2_lost_to_followup_details
âœ… Loaded: 08.3_transfer_out_details
âœ… Loaded: 09_active_pre_art_details
âœ… Loaded: 10_active_art_current_details
âœ… Loaded: 10.1_eligible_mmd_details
âœ… Loaded: 10.2_mmd_details
âœ… Loaded: 10.3_tld_details
âœ… Loaded: 10.4_tpt_start_details
âœ… Loaded: 10.5_tpt_complete_details
âœ… Loaded: 10.6_eligible_vl_test_details
âœ… Loaded: 10.7_vl_tested_12m_details
âœ… Loaded: 10.8_vl_suppression_details
ðŸ“Š Loaded 48 detail indicator queries into memory
âœ… Loaded: 01_active_art_previous
âœ… Loaded: 02_active_pre_art_previous
âœ… Loaded: 03_newly_enrolled
âœ… Loaded: 04_retested_positive
âœ… Loaded: 05_newly_initiated
âœ… Loaded: 05.1.1_art_same_day
âœ… Loaded: 05.1.2_art_1_7_days
âœ… Loaded: 05.1.3_art_over_7_days
âœ… Loaded: 05.2_art_with_tld
âœ… Loaded: 06_transfer_in
âœ… Loaded: 07_lost_and_return
âœ… Loaded: 08.1_dead
âœ… Loaded: 08.2_lost_to_followup
âœ… Loaded: 08.3_transfer_out
âœ… Loaded: 09_active_pre_art
âœ… Loaded: 10_active_art_current
âœ… Loaded: 10.1_eligible_mmd
âœ… Loaded: 10.2_mmd
âœ… Loaded: 10.3_tld
âœ… Loaded: 10.4_tpt_start
âœ… Loaded: 10.5_tpt_complete
âœ… Loaded: 10.6_eligible_vl_test
âœ… Loaded: 10.7_vl_tested_12m
âœ… Loaded: 10.8_vl_suppression
ðŸ“Š Loaded 24 aggregate indicator queries into memory
âœ… Loaded: 01_active_art_previous_details
âœ… Loaded: 02_active_pre_art_previous_details
âœ… Loaded: 03_newly_enrolled_details
âœ… Loaded: 04_retested_positive_details
âœ… Loaded: 05_newly_initiated_details
âœ… Loaded: 05.1.1_art_same_day_details
âœ… Loaded: 05.1.2_art_1_7_days_details
âœ… Loaded: 05.1.3_art_over_7_days_details
âœ… Loaded: 05.2_art_with_tld_details
âœ… Loaded: 06_transfer_in_details
âœ… Loaded: 07_lost_and_return_details
âœ… Loaded: 08.1_dead_details
âœ… Loaded: 08.2_lost_to_followup_details
âœ… Loaded: 08.3_transfer_out_details
âœ… Loaded: 09_active_pre_art_details
âœ… Loaded: 10_active_art_current_details
âœ… Loaded: 10.1_eligible_mmd_details
âœ… Loaded: 10.2_mmd_details
âœ… Loaded: 10.3_tld_details
âœ… Loaded: 10.4_tpt_start_details
âœ… Loaded: 10.5_tpt_complete_details
âœ… Loaded: 10.6_eligible_vl_test_details
âœ… Loaded: 10.7_vl_tested_12m_details
âœ… Loaded: 10.8_vl_suppression_details
ðŸ“Š Loaded 48 detail indicator queries into memory
Executing (default): SELECT 1+1 AS result
âœ… Database connection established successfully.
ðŸ§ª Testing database connections...
Executing (default): SELECT 1+1 AS result
âœ… Registry database connection: OK
Executing (default): SELECT * FROM sites WHERE status = 1 ORDER BY code
Executing (default): SELECT * FROM sites WHERE code = '0201' AND status = 1
Executing (default): SELECT 1+1 AS result
âœ… Connected to site database: Maung Russey RH (0201)
Executing (default): SELECT 1+1 AS result
âœ… Site 0201 (Maung Russey RH) connection: OK
Executing (default): SELECT * FROM sites WHERE code = '0202' AND status = 1
Executing (default): SELECT 1+1 AS result
âœ… Connected to site database: Battambang PH (0202)
Executing (default): SELECT 1+1 AS result
âœ… Site 0202 (Battambang PH) connection: OK
Executing (default): SELECT * FROM sites WHERE code = '0301' AND status = 1
Executing (default): SELECT 1+1 AS result
âœ… Connected to site database: Kampong Cham PH (0301)
Executing (default): SELECT 1+1 AS result
âœ… Site 0301 (Kampong Cham PH) connection: OK
Executing (default): SELECT * FROM sites WHERE code = '0306' AND status = 1
Executing (default): SELECT 1+1 AS result
âœ… Connected to site database: Chamkar Leu RH (0306)
Executing (default): SELECT 1+1 AS result
âœ… Site 0306 (Chamkar Leu RH) connection: OK
Executing (default): SELECT * FROM sites WHERE code = '1209' AND status = 1
Executing (default): SELECT 1+1 AS result
âœ… Connected to site database: Chhuk Sor (1209)
Executing (default): SELECT 1+1 AS result
âœ… Site 1209 (Chhuk Sor) connection: OK
Executing (default): SELECT * FROM sites WHERE code = '1801' AND status = 1
Executing (default): SELECT 1+1 AS result
âœ… Connected to site database: Preah Sihanouk PH (1801)
Executing (default): SELECT 1+1 AS result
âœ… Site 1801 (Preah Sihanouk PH) connection: OK
ðŸŽ‰ All database connections tested successfully!
ðŸš€ Server running on port 3001
ðŸ“Š Environment: development
ðŸ”— Health check: http://localhost:3001/health
Daily backup scheduled for 2:00 AM (Phnom Penh time)
Weekly backup scheduled for Sunday 3:00 AM (Phnom Penh time)
Monthly backup scheduled for 1st of month 4:00 AM (Phnom Penh time)
Backup scheduler started
ðŸ“… Backup scheduler started
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `node src/server.js`[39m
âœ… Loaded: 01_active_art_previous
âœ… Loaded: 02_active_pre_art_previous
âœ… Loaded: 03_newly_enrolled
âœ… Loaded: 04_retested_positive
âœ… Loaded: 05_newly_initiated
âœ… Loaded: 05.1.1_art_same_day
âœ… Loaded: 05.1.2_art_1_7_days
âœ… Loaded: 05.1.3_art_over_7_days
âœ… Loaded: 05.2_art_with_tld
âœ… Loaded: 06_transfer_in
âœ… Loaded: 07_lost_and_return
âœ… Loaded: 08.1_dead
âœ… Loaded: 08.2_lost_to_followup
âœ… Loaded: 08.3_transfer_out
âœ… Loaded: 09_active_pre_art
âœ… Loaded: 10_active_art_current
âœ… Loaded: 10.1_eligible_mmd
âœ… Loaded: 10.2_mmd
âœ… Loaded: 10.3_tld
âœ… Loaded: 10.4_tpt_start
âœ… Loaded: 10.5_tpt_complete
âœ… Loaded: 10.6_eligible_vl_test
âœ… Loaded: 10.7_vl_tested_12m
âœ… Loaded: 10.8_vl_suppression
ðŸ“Š Loaded 24 aggregate indicator queries into memory
âœ… Loaded: 01_active_art_previous_details
âœ… Loaded: 02_active_pre_art_previous_details
âœ… Loaded: 03_newly_enrolled_details
âœ… Loaded: 04_retested_positive_details
âœ… Loaded: 05_newly_initiated_details
âœ… Loaded: 05.1.1_art_same_day_details
âœ… Loaded: 05.1.2_art_1_7_days_details
âœ… Loaded: 05.1.3_art_over_7_days_details
âœ… Loaded: 05.2_art_with_tld_details
âœ… Loaded: 06_transfer_in_details
âœ… Loaded: 07_lost_and_return_details
âœ… Loaded: 08.1_dead_details
âœ… Loaded: 08.2_lost_to_followup_details
âœ… Loaded: 08.3_transfer_out_details
âœ… Loaded: 09_active_pre_art_details
âœ… Loaded: 10_active_art_current_details
âœ… Loaded: 10.1_eligible_mmd_details
âœ… Loaded: 10.2_mmd_details
âœ… Loaded: 10.3_tld_details
âœ… Loaded: 10.4_tpt_start_details
âœ… Loaded: 10.5_tpt_complete_details
âœ… Loaded: 10.6_eligible_vl_test_details
âœ… Loaded: 10.7_vl_tested_12m_details
âœ… Loaded: 10.8_vl_suppression_details
ðŸ“Š Loaded 48 detail indicator queries into memory
âœ… Loaded: 01_active_art_previous
âœ… Loaded: 02_active_pre_art_previous
âœ… Loaded: 03_newly_enrolled
âœ… Loaded: 04_retested_positive
âœ… Loaded: 05_newly_initiated
âœ… Loaded: 05.1.1_art_same_day
âœ… Loaded: 05.1.2_art_1_7_days
âœ… Loaded: 05.1.3_art_over_7_days
âœ… Loaded: 05.2_art_with_tld
âœ… Loaded: 06_transfer_in
âœ… Loaded: 07_lost_and_return
âœ… Loaded: 08.1_dead
âœ… Loaded: 08.2_lost_to_followup
âœ… Loaded: 08.3_transfer_out
âœ… Loaded: 09_active_pre_art
âœ… Loaded: 10_active_art_current
âœ… Loaded: 10.1_eligible_mmd
âœ… Loaded: 10.2_mmd
âœ… Loaded: 10.3_tld
âœ… Loaded: 10.4_tpt_start
âœ… Loaded: 10.5_tpt_complete
âœ… Loaded: 10.6_eligible_vl_test
âœ… Loaded: 10.7_vl_tested_12m
âœ… Loaded: 10.8_vl_suppression
ðŸ“Š Loaded 24 aggregate indicator queries into memory
âœ… Loaded: 01_active_art_previous_details
âœ… Loaded: 02_active_pre_art_previous_details
âœ… Loaded: 03_newly_enrolled_details
âœ… Loaded: 04_retested_positive_details
âœ… Loaded: 05_newly_initiated_details
âœ… Loaded: 05.1.1_art_same_day_details
âœ… Loaded: 05.1.2_art_1_7_days_details
âœ… Loaded: 05.1.3_art_over_7_days_details
âœ… Loaded: 05.2_art_with_tld_details
âœ… Loaded: 06_transfer_in_details
âœ… Loaded: 07_lost_and_return_details
âœ… Loaded: 08.1_dead_details
âœ… Loaded: 08.2_lost_to_followup_details
âœ… Loaded: 08.3_transfer_out_details
âœ… Loaded: 09_active_pre_art_details
âœ… Loaded: 10_active_art_current_details
âœ… Loaded: 10.1_eligible_mmd_details
âœ… Loaded: 10.2_mmd_details
âœ… Loaded: 10.3_tld_details
âœ… Loaded: 10.4_tpt_start_details
âœ… Loaded: 10.5_tpt_complete_details
âœ… Loaded: 10.6_eligible_vl_test_details
âœ… Loaded: 10.7_vl_tested_12m_details
âœ… Loaded: 10.8_vl_suppression_details
ðŸ“Š Loaded 48 detail indicator queries into memory
Executing (default): SELECT 1+1 AS result
âœ… Database connection established successfully.
ðŸ§ª Testing database connections...
Executing (default): SELECT 1+1 AS result
âœ… Registry database connection: OK
Executing (default): SELECT * FROM sites WHERE status = 1 ORDER BY code
Executing (default): SELECT * FROM sites WHERE code = '0201' AND status = 1
Executing (default): SELECT 1+1 AS result
âœ… Connected to site database: Maung Russey RH (0201)
Executing (default): SELECT 1+1 AS result
âœ… Site 0201 (Maung Russey RH) connection: OK
Executing (default): SELECT * FROM sites WHERE code = '0202' AND status = 1
Executing (default): SELECT 1+1 AS result
âœ… Connected to site database: Battambang PH (0202)
Executing (default): SELECT 1+1 AS result
âœ… Site 0202 (Battambang PH) connection: OK
Executing (default): SELECT * FROM sites WHERE code = '0301' AND status = 1
Executing (default): SELECT 1+1 AS result
âœ… Connected to site database: Kampong Cham PH (0301)
Executing (default): SELECT 1+1 AS result
âœ… Site 0301 (Kampong Cham PH) connection: OK
Executing (default): SELECT * FROM sites WHERE code = '0306' AND status = 1
Executing (default): SELECT 1+1 AS result
âœ… Connected to site database: Chamkar Leu RH (0306)
Executing (default): SELECT 1+1 AS result
âœ… Site 0306 (Chamkar Leu RH) connection: OK
Executing (default): SELECT * FROM sites WHERE code = '1209' AND status = 1
Executing (default): SELECT 1+1 AS result
âœ… Connected to site database: Chhuk Sor (1209)
Executing (default): SELECT 1+1 AS result
âœ… Site 1209 (Chhuk Sor) connection: OK
Executing (default): SELECT * FROM sites WHERE code = '1801' AND status = 1
Executing (default): SELECT 1+1 AS result
âœ… Connected to site database: Preah Sihanouk PH (1801)
Executing (default): SELECT 1+1 AS result
âœ… Site 1801 (Preah Sihanouk PH) connection: OK
ðŸŽ‰ All database connections tested successfully!
ðŸš€ Server running on port 3001
ðŸ“Š Environment: development
ðŸ”— Health check: http://localhost:3001/health
Daily backup scheduled for 2:00 AM (Phnom Penh time)
Weekly backup scheduled for Sunday 3:00 AM (Phnom Penh time)
Monthly backup scheduled for 1st of month 4:00 AM (Phnom Penh time)
Backup scheduler started
ðŸ“… Backup scheduler started
